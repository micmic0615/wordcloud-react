{"ast":null,"code":"var _jsxFileName = \"/Users/amiel.suarez/Desktop/Micmic/Lungs/src/app.js\";\nimport React, { Component } from 'react';\nimport 'Src/main.css';\nimport WordCloud from 'Src/wordcloud2';\nimport GenerateConfig from 'Src/config';\nimport MaskBase64 from 'Src/mask';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      var maskCanvas, wordsRendered;\n      var divContainer = document.querySelector(\".container\");\n      var divCanvas = document.querySelector(\"#canvas\");\n      var divImgCanvas = document.querySelector(\"#img-canvas\");\n      var divHtmlCanvas = document.querySelector(\"#html-canvas\");\n\n      function readMask(callback) {\n        maskCanvas = null;\n        var img = new Image();\n        img.crossOrigin = \"Anonymous\";\n        img.src = MaskBase64;\n\n        img.onload = function readPixels() {\n          window.URL.revokeObjectURL(MaskBase64);\n          maskCanvas = document.createElement('canvas');\n          maskCanvas.width = img.width;\n          maskCanvas.height = img.height;\n          var ctx = maskCanvas.getContext('2d');\n          ctx.drawImage(img, 0, 0, img.width, img.height);\n          var imageData = ctx.getImageData(0, 0, maskCanvas.width, maskCanvas.height);\n          var newImageData = ctx.createImageData(imageData);\n\n          for (var i = 0; i < imageData.data.length; i += 4) {\n            var tone = imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2];\n            var alpha = imageData.data[i + 3];\n\n            if (alpha < 128 || tone > 128 * 3) {\n              // Area not to draw\n              newImageData.data[i] = newImageData.data[i + 1] = newImageData.data[i + 2] = 255;\n              newImageData.data[i + 3] = 0;\n            } else {\n              // Area to draw\n              newImageData.data[i] = newImageData.data[i + 1] = newImageData.data[i + 2] = 0;\n              newImageData.data[i + 3] = 255;\n            }\n          }\n\n          ctx.putImageData(newImageData, 0, 0);\n          callback();\n        };\n      }\n\n      ;\n\n      function run(customList) {\n        wordsRendered = 0;\n        var runConfig = GenerateConfig(); // devicePixelRatio\n\n        var devicePixelRatio = parseFloat(1); // Set the width and height\n\n        var width = divContainer.offsetWidth;\n        var height = divContainer.offsetHeight;\n        var pixelWidth = width;\n        var pixelHeight = height;\n\n        if (devicePixelRatio !== 1) {\n          divCanvas.style.width = width + 'px';\n          divCanvas.style.height = height + 'px';\n          pixelWidth *= devicePixelRatio;\n          pixelHeight *= devicePixelRatio;\n        } else {\n          divCanvas.style.width = '';\n          divCanvas.style.height = '';\n        }\n\n        divCanvas.setAttribute('width', pixelWidth);\n        divCanvas.setAttribute('height', pixelHeight);\n        divHtmlCanvas.style.width = pixelWidth + 'px';\n        divHtmlCanvas.style.height = pixelHeight + 'px';\n\n        if (customList) {\n          runConfig.list = customList;\n        }\n\n        if (devicePixelRatio !== 1) {\n          if (!('gridSize' in runConfig)) {\n            runConfig.gridSize = 8;\n          }\n\n          runConfig.gridSize *= devicePixelRatio;\n\n          if (runConfig.origin) {\n            if (typeof runConfig.origin[0] == 'number') runConfig.origin[0] *= devicePixelRatio;\n            if (typeof runConfig.origin[1] == 'number') runConfig.origin[1] *= devicePixelRatio;\n          }\n\n          if (!('weightFactor' in runConfig)) {\n            runConfig.weightFactor = 1;\n          }\n\n          if (typeof runConfig.weightFactor == 'function') {\n            var origWeightFactor = runConfig.weightFactor;\n\n            runConfig.weightFactor = function weightFactorDevicePixelRatioWrap() {\n              return origWeightFactor.apply(this, arguments) * devicePixelRatio;\n            };\n          } else {\n            runConfig.weightFactor *= devicePixelRatio;\n          }\n        }\n\n        if (maskCanvas) {\n          runConfig.clearCanvas = false;\n          /* Determine bgPixel by creating\n          another canvas and fill the specified background color. */\n\n          var bctx = document.createElement('canvas').getContext('2d');\n          bctx.fillStyle = runConfig.backgroundColor || '#fff';\n          bctx.fillRect(0, 0, 1, 1);\n          var bgPixel = bctx.getImageData(0, 0, 1, 1).data;\n          var canvas = document.querySelector(\"#canvas\");\n          var maskCanvasScaled = document.createElement('canvas');\n          maskCanvasScaled.width = divCanvas.getAttribute(\"width\");\n          maskCanvasScaled.height = divCanvas.getAttribute(\"height\");\n          var ctx = maskCanvasScaled.getContext('2d');\n          ctx.drawImage(maskCanvas, 0, 0, maskCanvas.width, maskCanvas.height, 0, 0, maskCanvasScaled.width, maskCanvasScaled.height);\n          var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n          var newImageData = ctx.createImageData(imageData);\n\n          for (var i = 0; i < imageData.data.length; i += 4) {\n            if (imageData.data[i + 3] > 128) {\n              newImageData.data[i] = bgPixel[0];\n              newImageData.data[i + 1] = bgPixel[1];\n              newImageData.data[i + 2] = bgPixel[2];\n              newImageData.data[i + 3] = bgPixel[3];\n            } else {\n              // This color must not be the same w/ the bgPixel.\n              newImageData.data[i] = bgPixel[0];\n              newImageData.data[i + 1] = bgPixel[1];\n              newImageData.data[i + 2] = bgPixel[2];\n              newImageData.data[i + 3] = bgPixel[3] ? bgPixel[3] - 1 : 0;\n            }\n          }\n\n          ctx.putImageData(newImageData, 0, 0);\n          ctx = divCanvas.getContext('2d');\n          ctx.drawImage(maskCanvasScaled, 0, 0);\n          maskCanvasScaled = ctx = imageData = newImageData = bctx = bgPixel = undefined;\n        } // Always manually clean up the html output\n\n\n        if (!runConfig.clearCanvas) {\n          divHtmlCanvas.innerHTML = '';\n          divHtmlCanvas.style.backgroundColor = runConfig.backgroundColor || '#fff';\n        } // All set, call the WordCloud()\n        // Order matters here because the HTML canvas might by\n        // set to display: none.\n\n\n        WordCloud([divCanvas, divHtmlCanvas], runConfig);\n        divCanvas.addEventListener(\"wordclouddrawn\", function (test) {\n          wordsRendered++;\n\n          if (wordsRendered === runConfig.list.length) {\n            setTimeout(() => {\n              var pngUrl = divCanvas.toDataURL();\n              divImgCanvas.src = String(pngUrl);\n              divCanvas.style.opacity = 0;\n            }, 750);\n          }\n        });\n      }\n\n      ;\n      readMask(() => {\n        run();\n      });\n    };\n\n    this.state = {};\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      id: \"img-canvas\",\n      src: \"\",\n      class: \"canvas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(\"canvas\", {\n      id: \"canvas\",\n      class: \"canvas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"html-canvas\",\n      class: \"canvas hide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/amiel.suarez/Desktop/Micmic/Lungs/src/app.js"],"names":["React","Component","WordCloud","GenerateConfig","MaskBase64","App","constructor","props","componentDidMount","maskCanvas","wordsRendered","divContainer","document","querySelector","divCanvas","divImgCanvas","divHtmlCanvas","readMask","callback","img","Image","crossOrigin","src","onload","readPixels","window","URL","revokeObjectURL","createElement","width","height","ctx","getContext","drawImage","imageData","getImageData","newImageData","createImageData","i","data","length","tone","alpha","putImageData","run","customList","runConfig","devicePixelRatio","parseFloat","offsetWidth","offsetHeight","pixelWidth","pixelHeight","style","setAttribute","list","gridSize","origin","weightFactor","origWeightFactor","weightFactorDevicePixelRatioWrap","apply","arguments","clearCanvas","bctx","fillStyle","backgroundColor","fillRect","bgPixel","canvas","maskCanvasScaled","getAttribute","undefined","innerHTML","addEventListener","test","setTimeout","pngUrl","toDataURL","String","opacity","state","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'Src/main.css'\nimport WordCloud from 'Src/wordcloud2';\nimport GenerateConfig from 'Src/config';\nimport MaskBase64 from 'Src/mask';\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {  };\n    }\n\n    componentDidMount = () => {\n        var maskCanvas, wordsRendered;\n\n        var divContainer = document.querySelector(\".container\");\n        var divCanvas = document.querySelector(\"#canvas\");\n        var divImgCanvas = document.querySelector(\"#img-canvas\");\n        var divHtmlCanvas = document.querySelector(\"#html-canvas\");\n\n        function readMask(callback) {\n            maskCanvas = null;\n\n            var img = new Image();\n            img.crossOrigin = \"Anonymous\";\n            img.src = MaskBase64;\n\n            img.onload = function readPixels() {\n                window.URL.revokeObjectURL(MaskBase64);\n\n                maskCanvas = document.createElement('canvas');\n                maskCanvas.width = img.width;\n                maskCanvas.height = img.height;\n\n                var ctx = maskCanvas.getContext('2d');\n                ctx.drawImage(img, 0, 0, img.width, img.height);\n\n                var imageData = ctx.getImageData(\n                    0, 0, maskCanvas.width, maskCanvas.height);\n                var newImageData = ctx.createImageData(imageData);\n\n                for (var i = 0; i < imageData.data.length; i += 4) {\n                    var tone = imageData.data[i] +\n                        imageData.data[i + 1] +\n                        imageData.data[i + 2];\n                    var alpha = imageData.data[i + 3];\n\n                    if (alpha < 128 || tone > 128 * 3) {\n                        // Area not to draw\n                        newImageData.data[i] =\n                            newImageData.data[i + 1] =\n                            newImageData.data[i + 2] = 255;\n                        newImageData.data[i + 3] = 0;\n                    } else {\n                        // Area to draw\n                        newImageData.data[i] =\n                            newImageData.data[i + 1] =\n                            newImageData.data[i + 2] = 0;\n                        newImageData.data[i + 3] = 255;\n                    }\n                }\n\n                ctx.putImageData(newImageData, 0, 0);\n                callback()\n            };\n        };\n\n        function run(customList) {\n            wordsRendered = 0;\n            var runConfig = GenerateConfig();\n\n            // devicePixelRatio\n            var devicePixelRatio = parseFloat(1);\n\n            // Set the width and height\n            var width = divContainer.offsetWidth;\n            var height = divContainer.offsetHeight;\n            var pixelWidth = width;\n            var pixelHeight = height;\n\n            if (devicePixelRatio !== 1) {\n                divCanvas.style.width = width + 'px';\n                divCanvas.style.height = height + 'px';\n\n                pixelWidth *= devicePixelRatio;\n                pixelHeight *= devicePixelRatio;\n            } else {\n                divCanvas.style.width = '';\n                divCanvas.style.height = '';\n            }\n\n            divCanvas.setAttribute('width', pixelWidth);\n            divCanvas.setAttribute('height', pixelHeight);\n\n            divHtmlCanvas.style.width = pixelWidth + 'px';\n            divHtmlCanvas.style.height = pixelHeight + 'px';\n\n            if (customList){runConfig.list = customList}\n\n            if (devicePixelRatio !== 1) {\n                if (!('gridSize' in runConfig)) {\n                    runConfig.gridSize = 8;\n                }\n                runConfig.gridSize *= devicePixelRatio;\n\n                if (runConfig.origin) {\n                    if (typeof runConfig.origin[0] == 'number')\n                        runConfig.origin[0] *= devicePixelRatio;\n                    if (typeof runConfig.origin[1] == 'number')\n                        runConfig.origin[1] *= devicePixelRatio;\n                }\n\n                if (!('weightFactor' in runConfig)) {\n                    runConfig.weightFactor = 1;\n                }\n                if (typeof runConfig.weightFactor == 'function') {\n                    var origWeightFactor = runConfig.weightFactor;\n                    runConfig.weightFactor =\n                        function weightFactorDevicePixelRatioWrap() {\n                            return origWeightFactor.apply(this, arguments) * devicePixelRatio;\n                        };\n                } else {\n                    runConfig.weightFactor *= devicePixelRatio;\n                }\n            }\n\n        \n            if (maskCanvas) {\n                runConfig.clearCanvas = false;\n\n                /* Determine bgPixel by creating\n                another canvas and fill the specified background color. */\n                var bctx = document.createElement('canvas').getContext('2d');\n\n                bctx.fillStyle = runConfig.backgroundColor || '#fff';\n                bctx.fillRect(0, 0, 1, 1);\n                var bgPixel = bctx.getImageData(0, 0, 1, 1).data;\n                var canvas = document.querySelector(\"#canvas\")\n                var maskCanvasScaled = document.createElement('canvas');\n                maskCanvasScaled.width = divCanvas.getAttribute(\"width\");\n                maskCanvasScaled.height = divCanvas.getAttribute(\"height\");\n                var ctx = maskCanvasScaled.getContext('2d');\n\n                ctx.drawImage(maskCanvas,  0, 0, maskCanvas.width, maskCanvas.height, 0, 0, maskCanvasScaled.width, maskCanvasScaled.height);\n\n                var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                var newImageData = ctx.createImageData(imageData);\n                for (var i = 0; i < imageData.data.length; i += 4) {\n                    if (imageData.data[i + 3] > 128) {\n                        newImageData.data[i] = bgPixel[0];\n                        newImageData.data[i + 1] = bgPixel[1];\n                        newImageData.data[i + 2] = bgPixel[2];\n                        newImageData.data[i + 3] = bgPixel[3];\n                    } else {\n                        // This color must not be the same w/ the bgPixel.\n                        newImageData.data[i] = bgPixel[0];\n                        newImageData.data[i + 1] = bgPixel[1];\n                        newImageData.data[i + 2] = bgPixel[2];\n                        newImageData.data[i + 3] = bgPixel[3] ? (bgPixel[3] - 1) : 0;\n                    }\n                }\n\n                ctx.putImageData(newImageData, 0, 0);\n\n                ctx = divCanvas.getContext('2d');\n                ctx.drawImage(maskCanvasScaled, 0, 0);\n\n                maskCanvasScaled = ctx = imageData = newImageData = bctx = bgPixel = undefined;\n            }\n\n            // Always manually clean up the html output\n            if (!runConfig.clearCanvas) {\n                divHtmlCanvas.innerHTML = '';\n                divHtmlCanvas.style.backgroundColor =  runConfig.backgroundColor || '#fff';\n            }\n\n            // All set, call the WordCloud()\n            // Order matters here because the HTML canvas might by\n            // set to display: none.\n            WordCloud([divCanvas, divHtmlCanvas], runConfig);\n\n            divCanvas.addEventListener(\"wordclouddrawn\", function(test){\n                wordsRendered++;\n                if (wordsRendered === runConfig.list.length){\n                    setTimeout(() => {\n                        var pngUrl = divCanvas.toDataURL(); \n                        divImgCanvas.src = String(pngUrl);\n                        divCanvas.style.opacity = 0;\n                    },750)\n                }\n            });\n        };\n\n        readMask(() => {\n            run();\n        });\n    }\n\n    render() {\n        return (<div class=\"container\">\n            <img id=\"img-canvas\" src=\"\" class=\"canvas\" />\n            <canvas id=\"canvas\" class=\"canvas\" ></canvas>\n            <div id=\"html-canvas\" class=\"canvas hide\"></div>\n        </div>)\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}